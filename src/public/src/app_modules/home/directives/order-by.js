(function () {
    angular.module('app.home').directive('orderBy', ['config',
        function (config) {
            
            return {
                restrict: 'EA',
                scope: true,
                templateUrl: config.SRC_FOLDER + '/home/templates/order-by.html',
                controller: ['$scope', '$rootScope', function ($scope, $rootScope) {
                       
                    // initial position
                    $scope.order = 'updated_at';
                    $scope.direction = 'desc';

                    $scope.update = function() {

                        let data = {
                            order: $scope.order,
                            direction: $scope.direction
                        }
                        $rootScope.$broadcast('order-changed', data); // emmit
                    }                        
                }]
            };
        }
    ]);
})();
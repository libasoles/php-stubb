<div class="panel panel-default no-border stack-list">
    <div class="panel-heading">
        <h4><span translate="translations.home.sidebar.stacks.title"></span> <button class="btn btn-icon pull-right" ng-click="events.addNew()"><span class="glyphicon glyphicon-plus"></span></button></h4>
    </div>
    <div class="panel-body no-padding">
        <ul class="list-group">
            <li class="list-group-item " ng-if="context.stacks" ng-repeat="stack in context.stacks" ng-class="{selected: stack.id === context.current_stack.id}">
                <a href="#" ng-click="events.filter($event, stack)" class="col-md-6 trigger" title="{{ stack.name }}" ng-mouseenter="showCloseBtn = true" ng-mouseleave="showCloseBtn = false">
                    <button class="btn glyphicon glyphicon-remove btn-icon" 
                            ng-if="(stack.id === context.current_stack.id) && showCloseBtn"
                            translate-attr="{ title: 'translations.home.buttons.unselect' }" 
                            ng-click="events.unselectStackFilter($event, stack)"></button>
                    <span class="name">{{ stack.name }}</span>
                </a>
                <ul class="participants col-md-6 text-right">
                    <li ng-if="stack.users_count > 0" ng-repeat="user in stack.users">
                        <img ng-if="user.avatar" ng-src="{{ context.img_folder }}/{{ user.avatar }}" alt="{{ user.name }}" title="{{ user.name }}" />
                    </li>
                    <li ng-if="stack.users_count > 3">and {{ stack.users_count - 3 }} more</li>
                </ul>
            </li>                 
        </ul>
    </div>
</div>